<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cohen-sutherland线段裁剪算法-计算机图形学及实用编程技术-得鹿梦鱼</title>
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
    <meta name="Author" content="liming_longxi@163.com">
    <meta name="Keywords" content="cohen-sutherland线段裁剪算法"/>
  <link rel="stylesheet" href="/assets/styles/main.css" />
  <link rel="stylesheet" href="/assets/styles/katex/common.css" />
  <link rel="stylesheet" href="/assets/styles/katex/katex.min.css" />
  <script src="/assets/script/highlight.js"></script>
</head>

<body data-for="html-export">
  <div class="w-screen h-screen flex flex-col overflow-hidden">
    <header class="flex flex-grow-0 justify-between p-4 border-b border-neutral-200">
      <a href="/" class="flex items-center text-2xl text-neutral-700 cursor-pointer">
        <img src="/assets/images/logo.svg" class="w-[40px] h-[40px]" alt="得鹿梦鱼"></Image>
        <span class="text-4 ml-4">得鹿梦鱼</span>
      </a>
      <div class="right flex items-center cursor-pointer">
        <a href="/classify.html" class="mr-2 text-md hover:text-sky-500">知识库</a>
        <a href="/frontend.html" class="mr-2 text-md hover:text-sky-500">前端技能树</a>
        <a href="/question.html" class="mr-2 text-md hover:text-sky-500">面试题</a>
        <a href="/study.html" class="mr-2 text-md hover:text-sky-500">学习资料</a>
        <a href="/about.html" class="mr-2 text-md hover:text-sky-500">关于本人</a>
      </div>
    </header>
    <main class="flex-grow-1 overflow-hidden scrollHeight">
      <div class="w-screen flex flex-1">
        <aside class="basis-2/12 border-r border-gray-300 h-full overflow-hidden">
          <div class="text-md font-bold text-gray-700 m-4">计算机图形学及实用编程技术</div>
          <div class="overflow-x-hidden overflow-y-auto scrollChapterHeight scrollbar flex flex-col">
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100000.html" title="计算机图形学基础知识">计算机图形学基础知识
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100001.html" title="直线的生成算法BresenHam">直线的生成算法BresenHam
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100002.html" title="直线的生成算法_DDA">直线的生成算法_DDA
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100003.html" title="圆的生成算法_中点画圆算法">圆的生成算法_中点画圆算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100004.html" title="椭圆的生成算法_中点椭圆算法">椭圆的生成算法_中点椭圆算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100005.html" title="一个加权剖分简单多边形为凸多边形的算法">一个加权剖分简单多边形为凸多边形的算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100006.html" title="一种凹多边形凸分解的全局剖分算法">一种凹多边形凸分解的全局剖分算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100007.html" title="改进的加权剖分简单多边形为凸多边形的算法">改进的加权剖分简单多边形为凸多边形的算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100008.html" title="边界填充算法">边界填充算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100009.html" title="cohen-sutherland线段裁剪算法">cohen-sutherland线段裁剪算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100010.html" title="Nicholl-lee-Nicholl线段裁剪算法">Nicholl-lee-Nicholl线段裁剪算法
            </a>
            <a class="text-md block mx-4 mb-2 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap hover:text-sky-300" href="/10011_100011.html" title="梁友栋-barsky线段裁剪算法">梁友栋-barsky线段裁剪算法
            </a>
          </div>
        </aside>
        <section class="basis-10/12 overflow-x-hidden overflow-y-auto scrollChapterHeight scrollbar">
          <div id="markdown-container" class="px-4 relative">
            
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="cohen-sutherland线段裁剪算法">cohen-sutherland线段裁剪算法 </h1>
<p>这是一个最早开发的快速线段裁剪算法，该算法是通过初始测试来减少交点计算，从而减少线段裁剪算法所用的时间，每条线段的端点都被赋以称为区域码的四位二进制码，每一位用来标识端点相对于裁剪矩形边界的里面还是外面，<br>
如下图所示，设定按照右到左的顺序，在这个顺序下，最右边位置对应裁剪窗口的左边界，最左边对应窗口的上边界，任何码位的值为1表示端在在相应窗口边界的外面</p>
<table>
<thead>
<tr>
<th>位</th>
<th>4</th>
<th>3</th>
<th>2</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>坐标区域</td>
<td>上</td>
<td>下</td>
<td>右</td>
<td>左</td>
</tr>
</tbody>
</table>
<p>每一个裁剪窗口边界将二维空间划分为内部和外部的两个半空间，四个窗口边界一起构成了九个区域</p>
<p><img src="/assets/images/1000039.png" alt="九个区域区域码"></p>
<p>区域码的位值通过将端点的坐标值与裁剪窗口边界相比较而确定，如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&lt;</mo><mi>x</mi><msub><mi>w</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x &lt; xw_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为位置为1，否则为0，其他各位的值于此类似，</p>
<p>按照区域码图的顺序，<br>
第1位为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>−</mo><mi>x</mi><msub><mi>w</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x - xw_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的符号位<br>
第2位为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><msub><mi>w</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>−</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">xw_{max} - x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>的符号位<br>
第3位为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>−</mo><mi>y</mi><msub><mi>w</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y - yw_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的符号位<br>
第4位为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><msub><mi>w</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>−</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">yw_{max} - y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>的符号位</p>
<p>一旦给所有的线段端点建立了区域码，就可以快速的判断那条线端完全在裁剪区域内，那条线完全在裁剪区域外，完全在窗口边界内的端点，</p>
<blockquote>
<p>其两个端点的区域码均为0000，也就是逻辑或运算后为0，保留<br>
其两个端点的区域码，有一对相同位置都为1的线段则完全落在裁剪矩形外也就是说逻辑&amp;运算结果不为0，丢弃<br>
对于不能判断为完全在窗口外或者窗口内的线段，则要测试其与窗口边界的交点，可能需要进行多次求交运算才能完成一条线段的裁剪，求交次数依赖与选择裁剪边界的次序，每处理一条裁剪窗口边界后，裁掉其中一部分，剩下部分对照窗口的其余边界进行检测，一直进行到线段完全被裁剪掉或者雨下的线段部分完全 在裁剪窗口内</p>
</blockquote>
<ol>
<li>首先选择一个不完全在窗口边界内的端点，也就是code码不为0b0000的端点</li>
<li>判断该端点在那个区域内，会获取与只对应的交点，替换上述中的所选的端点</li>
</ol>
<h2 id="示例">示例 </h2>
<p>直线与裁剪窗口相交，与p3和p4点，<br>
p1的区域码为0001，p2为1010,都不完全在裁剪窗口内，选择p1为起始点<br>
判断p1和裁剪窗口的相对位置，在左侧区域内，<br>
计算交点p3(xmin, y), 使用p3替换p1判断线段的关系p3p2，由于p3的区域码为0000,所以选择p2为判断端点，根据上表中的坐标区域的顺序左右下上，判断出p2在裁剪窗口的右侧，得到交点p5，丢弃p5p2，判断线段p3p5与裁剪窗口的位置，<br>
选择交点p5作为判断点位，p5在裁剪窗口的上侧，，计算p4的位置<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x, ymax)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 丢弃p4p5段，剩余p3p4段完全在窗口内完成裁剪，如下图所示</p>
<p><img src="/assets/images/1000040.png" alt="直线与裁剪窗口示例"></p>
<p>请参考<a href="https://usernameisregistered.github.io/graph_js/line_clip_cohen-sutherland.html">cohen-sutherland线段裁剪算法</a></p>

      </div>
      <div class="md-sidebar-toc">
<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#cohen-sutherland线段裁剪算法" class="md-toc-link"><p>cohen-sutherland线段裁剪算法</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#示例" class="md-toc-link">
            <p>示例</p>

          </a></div>
        </div>
      </details>
    
</div>
</div>
      <a id="sidebar-toc-btn">≡</a>
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    
          </div>
        </section>
      </div>
    </main>
</body>

</html>