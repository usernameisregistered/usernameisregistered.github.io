{"pageProps":{"bookInfo":{"id":"01288e0e885cf75f8b4030462c73080c","name":"IndexedDB","fullPath":"F:\\passerby\\database\\IndexedDB","chapterList":[{"id":"01288e0e885cf75f8b4030462c73080c_c54aca2a56dea5b07f85c2e105552f27","type":"chapter","name":"01基础.md","fullPath":"F:\\passerby\\database\\IndexedDB\\01基础.md","url":"/chapter/01288e0e885cf75f8b4030462c73080c_c54aca2a56dea5b07f85c2e105552f27"},{"id":"01288e0e885cf75f8b4030462c73080c_58d3e8ce1bf4951200b44c765ace9991","type":"chapter","name":"02浏览器存储限制和清理标准.md","fullPath":"F:\\passerby\\database\\IndexedDB\\02浏览器存储限制和清理标准.md","url":"/chapter/01288e0e885cf75f8b4030462c73080c_58d3e8ce1bf4951200b44c765ace9991"},{"id":"01288e0e885cf75f8b4030462c73080c_082eb46db76273d24977be29fc67558e","type":"chapter","name":"03接口.md","fullPath":"F:\\passerby\\database\\IndexedDB\\03接口.md","url":"/chapter/01288e0e885cf75f8b4030462c73080c_082eb46db76273d24977be29fc67558e"}],"title":"02浏览器存储限制和清理标准","type":"book","url":"/book/01288e0e885cf75f8b4030462c73080c","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"浏览器存储限制和清理标准\">浏览器存储限制和清理标准 </h1>\n<p>一般来说，数据存储的类型主要有以下两种</p>\n<ol>\n<li>持久化存储：这种数据是希望长久保留的，只有的当用户选择清除才会被删除掉</li>\n<li>临时存储：这种数据不用保存很久，当最近一次使用时储存限制达到限制大小就会被自动清理掉</li>\n</ol>\n<h2 id=\"数据存储在哪里\">数据存储在哪里？ </h2>\n<p>每种存储类型代表一个单独的存储库。这是用户 Firefox 配置文件下目录的实际映射</p>\n<ul>\n<li><strong>profile</strong>/storage——配额管理器维护的主要顶级目录</li>\n<li><strong>profile</strong>/storage/permanent——持久数据存储库</li>\n<li><strong>profile</strong>/storage/temporary——临时数据存储库</li>\n<li><strong>profile</strong>/storage/default——默认数据存储库</li>\n</ul>\n<h2 id=\"数据储存限制\">数据储存限制 </h2>\n<p>浏览器的最大存储空间是动态的——它取决于你的硬盘大小。全局限制为可用磁盘空间的50％。在Firefox中，一个名为Quota Manager的内部浏览器工具会跟踪每个源用尽的磁盘空间，并在必要时删除数据。</p>\n<p>因此，如果你的硬盘驱动器是500GB，那么浏览器的总存储容量为 250GB。如果超过此范围，则会发起称为源回收的过程，删除整个源的数据，直到存储量再次低于限制。删除源数据没有只删一部分的说法——因为这样可能会导致不一致的问题。</p>\n<p>还有另一个限制称为组限制——这被定义为全局限制的20％，但它至少有10MB，最大为 2GB。每个源都是一组（源组）的一部分。</p>\n<h2 id=\"lru-策略\">LRU 策略 </h2>\n<p>当可用磁盘空间已满时，配额管理器将根据 LRU 策略开始清除数据——最近最少使用的源将首先被删除，然后是下一个，直到浏览器不再超过限制。</p>\n<p>我们使用临时存储跟踪每个源的“上次访问时间”。一旦达到临时存储的全局限制（之后会有更多限制），我们将尝试查找所有当前未使用的源（即没有打开选项卡/应用程序的那些来保持打开的数据存储）。然后根据“上次访问时间”对它们进行排序。然后删除最近最少使用的源，直到有足够的空间来满足触发此源回收的请求</p>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<details style=\"padding:0;;padding-left:0px;\" open=\"\">\n        <summary class=\"md-toc-link-wrapper\">\n          <a href=\"#浏览器存储限制和清理标准\" class=\"md-toc-link\"><p>浏览器存储限制和清理标准</p>\n</a>\n          </summary>\n        <div>\n          <div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:42px\">\n          <a href=\"#数据存储在哪里\" class=\"md-toc-link\">\n            <p>数据存储在哪里？</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:42px\">\n          <a href=\"#数据储存限制\" class=\"md-toc-link\">\n            <p>数据储存限制</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:42px\">\n          <a href=\"#lru-策略\" class=\"md-toc-link\">\n            <p>LRU 策略</p>\n\n          </a></div>\n        </div>\n      </details>\n    \n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},"title":"02浏览器存储限制和清理标准"},"__N_SSG":true}