{"pageProps":{"bookInfo":{"id":"10035","name":"MongoDB","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB","chapterList":[{"id":"10035_100000","type":"chapter","name":"介绍","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\01介绍.md","url":"/chapter/10035_100000","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb简介\">MongoDB简介 </h1>\n<blockquote>\n<p>是一个基于分布式文件存储的开源数据库系统<br>\nMongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案<br>\n将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组</p>\n</blockquote>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb简介\" class=\"md-toc-link\">\n            <p>MongoDB简介</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},{"id":"10035_100001","type":"chapter","name":"安装","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\02安装.md","url":"/chapter/10035_100001","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb-安装\">mongodb 安装 </h1>\n<p>[window]<br>\n下载 <a href=\"https://www.mongodb.com/download-center#community\">地址</a></p>\n<p>安装</p>\n<p>创建数据目录</p>\n<p>启动 path/bin/mongod -dbpath dbpath</p>\n<p>[linux]</p>\n<p>下载 <a href=\"https://www.mongodb.com/download-center#community\">地址</a></p>\n<p>curl -O <a href=\"https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz\">https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz</a></p>\n<p>tar -zxvf mongodb-linux-x86_64-3.0.6.tgz</p>\n<p>mv  mongodb-linux-x86_64-3.0.6/ /usr/local/mongodb</p>\n<p>export PATH=&lt;mongodb-install-directory&gt;/bin:$PATH</p>\n<p>创建数据目录</p>\n<p>mkdir -p /data/db</p>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb-安装\" class=\"md-toc-link\">\n            <p>mongodb 安装</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},{"id":"10035_100002","type":"chapter","name":"概念","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\03概念.md","url":"/chapter/10035_100002","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb-概念\">mongodb 概念 </h1>\n<blockquote>\n<p>数据库 \"show dbs\" 命令可以显示所有数据的列表<br>\n文档 Document 文档是一组键值(key-value)对(即 BSON)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别<br>\n集合 MongoDB 文档组</p>\n</blockquote>\n<p>数据类型</p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>String</td>\n<td>字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的</td>\n</tr>\n<tr>\n<td>Integer</td>\n<td>整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位</td>\n</tr>\n<tr>\n<td>Boolean</td>\n<td>布尔值。用于存储布尔值（真/假）</td>\n</tr>\n<tr>\n<td>Double</td>\n<td>双精度浮点值。用于存储浮点值</td>\n</tr>\n<tr>\n<td>Min/Max keys</td>\n<td>将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对</td>\n</tr>\n<tr>\n<td>Array</td>\n<td>用于将数组或列表或多个值存储为一个键</td>\n</tr>\n<tr>\n<td>Timestamp</td>\n<td>时间戳。记录文档修改或添加的具体时间</td>\n</tr>\n<tr>\n<td>Object</td>\n<td>用于内嵌文档</td>\n</tr>\n<tr>\n<td>Null</td>\n<td>用于创建空值</td>\n</tr>\n<tr>\n<td>Symbol</td>\n<td>符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言</td>\n</tr>\n<tr>\n<td>Date</td>\n<td>日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息</td>\n</tr>\n<tr>\n<td>Object ID</td>\n<td>对象 ID。用于创建文档的 ID</td>\n</tr>\n<tr>\n<td>Binary Data</td>\n<td>二进制数据。用于存储二进制数</td>\n</tr>\n<tr>\n<td>Code</td>\n<td>代码类型。用于在文档中存储 JavaScript 代码</td>\n</tr>\n<tr>\n<td>Regular expression</td>\n<td>正则表达式类型。用于存储正则表达式</td>\n</tr>\n</tbody>\n</table>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb-概念\" class=\"md-toc-link\">\n            <p>mongodb 概念</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},{"id":"10035_100003","type":"chapter","name":"连接","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\04连接.md","url":"/chapter/10035_100003","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb-连接\">mongodb 连接 </h1>\n<p>php 连接语法</p>\n<pre data-role=\"codeBlock\" data-info=\"\" class=\"language-text\"><code>mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]\n</code></pre><p>shell 连接<br>\nmongo</p>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb-连接\" class=\"md-toc-link\">\n            <p>mongodb 连接</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},{"id":"10035_100004","type":"chapter","name":"命令.","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\05命令..md","url":"/chapter/10035_100004","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h2 id=\"数据库相关\">数据库相关 </h2>\n<p>创建数据库 use database_name<br>\n查看数据库 show dbs<br>\n删除数据库 db.dropDatabase()</p>\n<h2 id=\"集合\">集合 </h2>\n<p>创建集合 db.createCollection(name,options)<br>\noptions<br>\ncapped\t布尔\t（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档,当该值为 true 时，必须指定 size 参数<br>\nautoIndexId\t布尔\t（可选）如为 true，自动在 _id 字段创建索引。默认为 false。<br>\nsize\t数值\t（可选）为固定集合指定一个最大值，以千字节计（KB）,如果 capped 为 true，也需要指定该字段。<br>\nmax\t数值\t（可选）指定固定集合中包含文档的最大数量</p>\n<p>查看已有集合 show collections show tables<br>\n删除集合 db.collection.drop()</p>\n<h2 id=\"文档相关\">文档相关 </h2>\n<p>插入文档 db.collect_name.insert(document)<br>\n向指定集合中插入一条文档数据 db.collection.insertOne()<br>\n向指定集合中插入多条文档数据 db.collection.insertMany()<br>\n文档查找 db.collect_name.find()<br>\n文档更新 db.collect_name.update(&lt;query&gt;, &lt;update&gt;,&lt;options&gt;)<br>\n文档替换 db.collect_name.save(document)<br>\n文档删除 db.collect_name.remove(&lt;query&gt;,&lt;options&gt;)<br>\n文档删除 db.collect_name.deleteOne(&lt;query&gt;)<br>\n全部文档删除 db.collect_name.deleteMany(&lt;query&gt;)</p>\n<h2 id=\"type-操作符\">$type 操作符 </h2>\n<p>double 1<br>\nstring 2<br>\nobject 3<br>\narray 4<br>\nbinary data 5<br>\nundefined 6<br>\nobject id 7<br>\nboolean 8<br>\ndate 9<br>\nnull 10<br>\nregular expression 11<br>\njavascript 13<br>\nsymbol 14</p>\n<h2 id=\"分页\">分页 </h2>\n<p>读取指定数量的数据记录 db.COLLECTION_NAME.find().limit(NUMBER)<br>\n跳过指定数量的数据 db.COLLECTION_NAME.find().limit(NUMBER).skip(NUMBER)</p>\n<h2 id=\"排序\">排序 </h2>\n<p>db.COLLECTION_NAME.find().sort({KEY:1})</p>\n<h2 id=\"索引\">索引 </h2>\n<p>创建 db.collection_name.createIndex(key,options)<br>\n查看 db.collection_name.getIndexs()<br>\n查看集合索引大小 db.collection_name.getIndexSize()<br>\n删除 db.collection_name.dropIndex()</p>\n<h2 id=\"聚合\">聚合 </h2>\n<p>db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)</p>\n<table>\n<thead>\n<tr>\n<th>表达式</th>\n<th>描述</th>\n<th>实例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>$sum</td>\n<td>计算总和</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : \"$likes\"}}}])</td>\n</tr>\n<tr>\n<td>$avg</td>\n<td>计算平均值</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$avg : \"$likes\"}}}])</td>\n</tr>\n<tr>\n<td>$min</td>\n<td>获取集合中所有文档对应值得最小值。</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$min : \"$likes\"}}}])</td>\n</tr>\n<tr>\n<td>$max</td>\n<td>获取集合中所有文档对应值得最大值。</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$max : \"$likes\"}}}])</td>\n</tr>\n<tr>\n<td>$push</td>\n<td>在结果文档中插入值到一个数组中。</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$push: \"$url\"}}}])</td>\n</tr>\n<tr>\n<td>$addToSet</td>\n<td>在结果文档中插入值到一个数组中，但不创建副本。</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$addToSet : \"$url\"}}}])</td>\n</tr>\n<tr>\n<td>$first</td>\n<td>根据资源文档的排序获取第一个文档数据。</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", first_url : {$first : \"$url\"}}}])</td>\n</tr>\n<tr>\n<td>$last</td>\n<td>根据资源文档的排序获取最后一个文档数据</td>\n<td>db.mycol.aggregate([{$group : {_id : \"$by_user\", last_url : {$last : \"$url\"}}}])</td>\n</tr>\n</tbody>\n</table>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#数据库相关\" class=\"md-toc-link\">\n            <p>数据库相关</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#集合\" class=\"md-toc-link\">\n            <p>集合</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#文档相关\" class=\"md-toc-link\">\n            <p>文档相关</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#type-操作符\" class=\"md-toc-link\">\n            <p>$type 操作符</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#分页\" class=\"md-toc-link\">\n            <p>分页</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#排序\" class=\"md-toc-link\">\n            <p>排序</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#索引\" class=\"md-toc-link\">\n            <p>索引</p>\n\n          </a></div><div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#聚合\" class=\"md-toc-link\">\n            <p>聚合</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "},{"id":"10035_100005","type":"chapter","name":"高级","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\06高级.md","url":"/chapter/10035_100005","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb-高级\">mongodb 高级 </h1>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb-高级\" class=\"md-toc-link\">\n            <p>mongodb 高级</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "}],"type":"book","url":"/book/10035"},"chapterInfo":{"id":"10035_100000","type":"chapter","name":"介绍","fullPath":"D:\\personal\\文档\\passerby\\database\\MongoDB\\01介绍.md","url":"/chapter/10035_100000","content":"\n    \n    \n      <div class=\"crossnote markdown-preview  \">\n      \n<h1 id=\"mongodb简介\">MongoDB简介 </h1>\n<blockquote>\n<p>是一个基于分布式文件存储的开源数据库系统<br>\nMongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案<br>\n将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组</p>\n</blockquote>\n\n      </div>\n      <div class=\"md-sidebar-toc\">\n<div class=\"md-toc\">\n<div class=\"md-toc-link-wrapper\" style=\"padding:0;;display:list-item;list-style:square;margin-left:18px\">\n          <a href=\"#mongodb简介\" class=\"md-toc-link\">\n            <p>MongoDB简介</p>\n\n          </a></div>\n</div>\n</div>\n      <a id=\"sidebar-toc-btn\">≡</a>\n    \n    \n    \n    \n    \n    \n<script>\n\nvar sidebarTOCBtn = document.getElementById('sidebar-toc-btn')\nsidebarTOCBtn.addEventListener('click', function(event) {\n  event.stopPropagation()\n  if (document.body.hasAttribute('html-show-sidebar-toc')) {\n    document.body.removeAttribute('html-show-sidebar-toc')\n  } else {\n    document.body.setAttribute('html-show-sidebar-toc', true)\n  }\n})\n</script>\n      \n  \n    "}},"__N_SSG":true}